<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="style.css">
    <script id="shader-fs" type="x-shader/x-fragment"></script>
    <script id="shader-vs" type="x-shader/x-vertex">
        
        
        attribute vec3 aVertexPosition;

        void main() {

            gl_Position = vec4 (aVertexPosition, 1.0)

        }

    </script>
    <script>

        let canvas, gl;
        let vertexPositionLocation;

        function resize(){
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            gl.viewport(0, 0, canvas.width, canvas.height);
        }

        function compileShader(shaderSource, shaderType){

            let shader = gl.createShader(shader);
            gl.shaderSource(shader, shaderSource);
            gl.compileShader(shader);
            return shader;

        }

        function getShader(id){
            let shaderScript = document.getElementById(id);

            let shaderSource = "";
            let textLine = shaderScript.firstChild;
            while (textLine) {
                // 3 - TEXT NODE
                if (textLine.nodeType == 3){
                    shaderSource += textLine.textContent;
                }

                textLine = textLine.nextSibling;
            }

            let shader;
            if (shaderScript.type == "x-shader/x-fragment"){
                shader = compileShader(shaderScript, gl.FRAGMENT_SHADER);
            }
            else if (shaderScript.type == "x-shader/x-vertex"){
                shader = compileShader(shaderScript, gl.VERTEX_SHADER);
            }
            else {
                return null;
            }
            return shader;

        }

        function bootstrap(){

            canvas = document.getElementById("holder");

            gl = canvas.getContext("experimental-webgl");

            resize();

            window.addEventListener("resize", resize);

            let fragmentShader = getShader("shader-fs");
            let vertexShader = getShader("shader-vs");

            let shaderProgram = gl.createProgram();
            gl.attachShader(shaderProgram, vertexShader);
            gl.attachShader(shaderProgram, fragmentShader);
            gl.linkProgram(shaderProgram);

            gl.useProgram(shaderProgram);

            gl.deleteShader(fragmentShader);
            gl.deleteShader(vertexShader);

            vertexPositionLocation = gl.getAttribLocation(shaderProgram, "aVertexPosition");

            let buffer = gl.createBuffer();
            gl.binBuffer(gl.ARRAY_BUFFER, buffer);
            gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);
            gl.enableVertexAttribArray(vertexPositionLocation);
            gl.vertexAttribPointer(vertexPositionLocation, 2, gl.FLOAT, 0, 0);


        }

    </script>
    <title>Document</title>
</head>
<body onload="bootstrap();">
    <canvas id="holder"></canvas>
</body>
</html>